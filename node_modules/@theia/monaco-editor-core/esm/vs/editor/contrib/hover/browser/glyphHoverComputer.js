"use strict";
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
Object.defineProperty(exports, "__esModule", { value: true });
exports.GlyphHoverComputer = void 0;
const arrays_js_1 = require("../../../../base/common/arrays.js");
const htmlContent_js_1 = require("../../../../base/common/htmlContent.js");
const model_js_1 = require("../../../common/model.js");
class GlyphHoverComputer {
    constructor(_editor) {
        this._editor = _editor;
    }
    computeSync(opts) {
        const toHoverMessage = (contents) => {
            return {
                value: contents
            };
        };
        const lineDecorations = this._editor.getLineDecorations(opts.lineNumber);
        const result = [];
        const isLineHover = opts.laneOrLine === 'lineNo';
        if (!lineDecorations) {
            return result;
        }
        for (const d of lineDecorations) {
            const lane = d.options.glyphMargin?.position ?? model_js_1.GlyphMarginLane.Center;
            if (!isLineHover && lane !== opts.laneOrLine) {
                continue;
            }
            const hoverMessage = isLineHover ? d.options.lineNumberHoverMessage : d.options.glyphMarginHoverMessage;
            if (!hoverMessage || (0, htmlContent_js_1.isEmptyMarkdownString)(hoverMessage)) {
                continue;
            }
            result.push(...(0, arrays_js_1.asArray)(hoverMessage).map(toHoverMessage));
        }
        return result;
    }
}
exports.GlyphHoverComputer = GlyphHoverComputer;
//# sourceMappingURL=glyphHoverComputer.js.map