"use strict";
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
Object.defineProperty(exports, "__esModule", { value: true });
exports.observableConfigValue = observableConfigValue;
exports.bindContextKey = bindContextKey;
const observable_js_1 = require("../../../base/common/observable.js");
/** Creates an observable update when a configuration key updates. */
function observableConfigValue(key, defaultValue, configurationService) {
    return (0, observable_js_1.observableFromEventOpts)({ debugName: () => `Configuration Key "${key}"`, }, (handleChange) => configurationService.onDidChangeConfiguration(e => {
        if (e.affectsConfiguration(key)) {
            handleChange(e);
        }
    }), () => configurationService.getValue(key) ?? defaultValue);
}
/** Update the configuration key with a value derived from observables. */
function bindContextKey(key, service, computeValue) {
    const boundKey = key.bindTo(service);
    return (0, observable_js_1.autorunOpts)({ debugName: () => `Set Context Key "${key.key}"` }, reader => {
        boundKey.set(computeValue(reader));
    });
}
//# sourceMappingURL=platformObservableUtils.js.map